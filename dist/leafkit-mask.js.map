{"version":3,"file":"leafkit-mask.js","sources":["../src/mask.js","../src/helpers.js","../src/mask-factory.js","../src/masks/decimal.js","../src/masks/number.js","../src/install.js","../src/index.js"],"sourcesContent":["export default class Mask {\r\n\r\n    constructor(pattern, opt) {\r\n        this.options = opt || {};\r\n        this.options = {\r\n            reverse: this.options.reverse || false,\r\n            usedefaults: this.options.usedefaults || this.options.reverse\r\n        };\r\n        this.pattern = pattern;\r\n    }\r\n\r\n    process(value, pattern, options) {\r\n        return new Mask(pattern, options).process(value);\r\n    };\r\n\r\n    apply(value, pattern, options) {\r\n        return new Mask(pattern, options).apply(value);\r\n    };\r\n\r\n    validate(value, pattern, options) {\r\n        return new Mask(pattern, options).validate(value);\r\n    };\r\n\r\n}\r\n\r\nMask.prototype.process = function proccess(value) {\r\n    if (!value) {\r\n        return {result: '', valid: false};\r\n    }\r\n    value = value + '';\r\n    var pattern2 = this.pattern;\r\n    var valid = true;\r\n    var formatted = '';\r\n    var valuePos = this.options.reverse ? value.length - 1 : 0;\r\n    var patternPos = 0;\r\n    var optionalNumbersToUse = _calcOptionalNumbersToUse(pattern2, value);\r\n    var escapeNext = false;\r\n    var recursive = [];\r\n    var inRecursiveMode = false;\r\n\r\n    var steps = {\r\n        start: this.options.reverse ? pattern2.length - 1 : 0,\r\n        end: this.options.reverse ? -1 : pattern2.length,\r\n        inc: this.options.reverse ? -1 : 1\r\n    };\r\n\r\n    function continueCondition(options) {\r\n        if (!inRecursiveMode && !recursive.length && _hasMoreTokens(pattern2, patternPos, steps.inc)) {\r\n            return true;\r\n        } else if (!inRecursiveMode && recursive.length &&\r\n            _hasMoreRecursiveTokens(pattern2, patternPos, steps.inc)) {\r\n            return true;\r\n        } else if (!inRecursiveMode) {\r\n            inRecursiveMode = recursive.length > 0;\r\n        }\r\n\r\n        if (inRecursiveMode) {\r\n            var pc = recursive.shift();\r\n            recursive.push(pc);\r\n            if (options.reverse && valuePos >= 0) {\r\n                patternPos++;\r\n                pattern2 = _insertChar(pattern2, pc, patternPos);\r\n                return true;\r\n            } else if (!options.reverse && valuePos < value.length) {\r\n                pattern2 = _insertChar(pattern2, pc, patternPos);\r\n                return true;\r\n            }\r\n        }\r\n        return patternPos < pattern2.length && patternPos >= 0;\r\n    }\r\n\r\n    for (patternPos = steps.start; continueCondition(this.options); patternPos = patternPos + steps.inc) {\r\n        var vc = value.charAt(valuePos);\r\n        var pc = pattern2.charAt(patternPos);\r\n\r\n        var token = tokens[pc];\r\n        if (recursive.length && token && !token.recursive) {\r\n            token = null;\r\n        }\r\n\r\n        if (!inRecursiveMode || vc) {\r\n            if (this.options.reverse && _isEscaped(pattern2, patternPos)) {\r\n                formatted = _concatChar(formatted, pc, this.options, token);\r\n                patternPos = patternPos + steps.inc;\r\n                continue;\r\n            } else if (!this.options.reverse && escapeNext) {\r\n                formatted = _concatChar(formatted, pc, this.options, token);\r\n                escapeNext = false;\r\n                continue;\r\n            } else if (!this.options.reverse && token && token.escape) {\r\n                escapeNext = true;\r\n                continue;\r\n            }\r\n        }\r\n\r\n        if (!inRecursiveMode && token && token.recursive) {\r\n            recursive.push(pc);\r\n        } else if (inRecursiveMode && !vc) {\r\n            formatted = _concatChar(formatted, pc, this.options, token);\r\n            continue;\r\n        } else if (!inRecursiveMode && recursive.length > 0 && !vc) {\r\n            continue;\r\n        }\r\n\r\n        if (!token) {\r\n            formatted = _concatChar(formatted, pc, this.options, token);\r\n            if (!inRecursiveMode && recursive.length) {\r\n                recursive.push(pc);\r\n            }\r\n        } else if (token.optional) {\r\n            if (token.pattern.test(vc) && optionalNumbersToUse) {\r\n                formatted = _concatChar(formatted, vc, this.options, token);\r\n                valuePos = valuePos + steps.inc;\r\n                optionalNumbersToUse--;\r\n            } else if (recursive.length > 0 && vc) {\r\n                valid = false;\r\n                break;\r\n            }\r\n        } else if (token.pattern.test(vc)) {\r\n            formatted = _concatChar(formatted, vc, this.options, token);\r\n            valuePos = valuePos + steps.inc;\r\n        } else if (!vc && token._default && this.options.usedefaults) {\r\n            formatted = _concatChar(formatted, token._default, this.options, token);\r\n        } else {\r\n            valid = false;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return {result: formatted, valid: valid};\r\n};\r\n\r\nMask.prototype.apply = function(value) {\r\n    return this.process(value).result;\r\n};\r\n\r\nMask.prototype.validate = function(value) {\r\n    return this.process(value).valid;\r\n};\r\n\r\nconst tokens = {\r\n    '0': {pattern: /\\d/, _default: '0'},\r\n    '9': {pattern: /\\d/, optional: true},\r\n    '#': {pattern: /\\d/, optional: true, recursive: true},\r\n    'A': {pattern: /[a-zA-Z0-9]/},\r\n    'S': {pattern: /[a-zA-Z]/},\r\n    'U': {pattern: /[a-zA-Z]/, transform: function(c) { return c.toLocaleUpperCase(); }},\r\n    'L': {pattern: /[a-zA-Z]/, transform: function(c) { return c.toLocaleLowerCase(); }},\r\n    '$': {escape: true}\r\n}\r\n\r\nconst _isEscaped = (pattern, pos) => {\r\n    let cont = 0;\r\n    let i = pos - 1;\r\n    let token = {escape: true};\r\n    while (i >= 0 && token && token.escape) {\r\n        token = tokens[pattern.charAt(i)];\r\n        cont += token && token.escape ? 1 : 0;\r\n        i--;\r\n    }\r\n    return cont > 0 && cont % 2 === 1;\r\n}\r\n\r\nconst _calcOptionalNumbersToUse = (pattern, value) => {\r\n    let numbersInP = pattern.replace(/[^0]/g,'').length;\r\n    let numbersInV = value.replace(/[^\\d]/g,'').length;\r\n    return numbersInV - numbersInP;\r\n}\r\n\r\nconst _concatChar = (text, character, options, token) => {\r\n    if (token && typeof token.transform === 'function') {\r\n        character = token.transform(character);\r\n    }\r\n    if (options.reverse) {\r\n        return character + text;\r\n    }\r\n    return text + character;\r\n}\r\n\r\nconst _hasMoreTokens = (pattern, pos, inc) => {\r\n    let pc = pattern.charAt(pos);\r\n    let token = tokens[pc];\r\n    if (pc === '') {\r\n        return false;\r\n    }\r\n    return token && !token.escape ? true : _hasMoreTokens(pattern, pos + inc, inc);\r\n}\r\n\r\nconst _hasMoreRecursiveTokens = (pattern, pos, inc) => {\r\n    let pc = pattern.charAt(pos);\r\n    let token = tokens[pc];\r\n    if (pc === '') {\r\n        return false;\r\n    }\r\n    return token && token.recursive ? true : _hasMoreRecursiveTokens(pattern, pos + inc, inc);\r\n}\r\n\r\nconst _insertChar = (text, char, position) => {\r\n    let t = text.split('');\r\n    t.splice(position, 0, char);\r\n    return t.join('');\r\n}","export const getInputElement = (el, vnode) => {\r\n    return vnode.tag === 'input' ? el : el.querySelector('input:not([readonly])');\r\n};\r\n\r\nexport const filterNumbers = v => v.replace(/\\D/g, '');\r\n\r\nexport const filterLetters = v => v.replace(/[^a-zA-Z]/g, '');\r\n\r\nexport const filterAlphanumeric = v => v.replace(/[^a-zA-Z0-9]/g, '');\r\n\r\nexport const getCleaner = clearValue => {\r\n    if (typeof clearValue === 'function') {\r\n        return clearValue;\r\n    }\r\n    \r\n    switch (clearValue) {\r\n        case 'number':\r\n        return filterNumbers;\r\n        break;\r\n        case 'letter':\r\n        return filterLetters;\r\n        break;\r\n        default:\r\n        return filterAlphanumeric;\r\n    }\r\n};","import Mask from './mask';\r\nimport {_Vue as Vue} from \"./install\";\r\nimport {getCleaner, getInputElement} from \"./helpers\";\r\n\r\nconst createHandler = ({clean, format, formatter}) => {\r\n\treturn ({target, type, isTrusted}) => {\r\n\t\t\r\n\t\tif (type === 'paste') {\r\n\t\t\ttarget.value = '';\r\n\t\t}\r\n\t\t\r\n\t\tlet value = clean(target.value);\r\n\t\ttarget.value = format({value, formatter});\r\n\t\ttarget.dataset.value = target.value;\r\n\t\t\r\n\t\tif (type === 'mask' || isTrusted) {\r\n\t\t\ttarget.dispatchEvent(new Event('input'));\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst defaultFormat = ({value, formatter}) => {\r\n\tvalue = formatter.apply(value);\r\n\treturn value.trim().replace(/[^0-9]$/, '');\r\n}\r\n\r\nconst maskFactory = (bind) => {\r\n\treturn {\r\n\t\t\r\n\t\tbind(el, binding, vnode) {\r\n\t\t\tconst mask = bind(el, binding, vnode);\r\n\t\t\t\r\n\t\t\tconst clean = getCleaner(mask.clearValue);\r\n\t\t\tconst format = mask.format || defaultFormat;\r\n\t\t\tconst formatter = mask.pattern ? new Mask(mask.pattern, mask.options || {}) : null;\r\n\t\t\tconst handler = createHandler({clean, format, formatter});\r\n\t\t\t\r\n\t\t\tel = getInputElement(el, vnode);\r\n\t\t\t\r\n\t\t\tel.addEventListener('input', handler, false);\r\n\t\t\tel.addEventListener('paste', handler, false);\r\n\t\t\tel.addEventListener('blur', handler, false);\r\n\t\t\tel.addEventListener('mask', handler, false);\r\n\t\t\t\r\n\t\t\thandler({target: el, type: 'mask'});\r\n\t\t},\r\n\t\t\r\n\t\tupdate (el, {}, vnode) {\r\n\t\t\tel = getInputElement(el, vnode);\r\n\t\t\tVue.nextTick(() => {\r\n\t\t\t\tconst previousValue = el.dataset.value || '';\r\n\t\t\t\tif (previousValue !== el.value) {\r\n\t\t\t\t\tel.dispatchEvent(new Event('mask'));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default maskFactory;","import maskFactory from \"../mask-factory\";\r\n\r\nconst config = {\r\n    br: {thousand: '.', decimal: ','},\r\n    us: {thousand: ',', decimal: '.'}\r\n};\r\n\r\nexport default maskFactory((el, {value, arg, modifiers}) => {\r\n    const key = arg || Object.keys(modifiers)[0] || 'br';\r\n    const conf = config[key];\r\n    \r\n    let pattern = `#${conf.thousand}##0`;\r\n    \r\n    if (value && value > 0) {\r\n        pattern += conf.decimal;\r\n        while (value > 0) {\r\n            pattern += '0';\r\n            value--;\r\n        }\r\n    }\r\n    \r\n    return {\r\n        pattern,\r\n        options: {reverse: true},\r\n        clearValue: 'number',\r\n        format({value, formatter}) {\r\n            return formatter.apply(Number(value));\r\n        }\r\n    }\r\n});","import maskFactory from \"../mask-factory\";\r\n\r\nexport default maskFactory(() => {\r\n  return {\r\n    pattern: '#0',\r\n    options: {reverse: true},\r\n    clearValue: 'number'\r\n  }\r\n});","import decimal from './masks/decimal';\r\nimport number from './masks/number';\r\n\r\nexport let _Vue;\r\n\r\nexport function install(Vue) {\r\n    if (install.installed) {\r\n        return;\r\n    }\r\n    \r\n    _Vue = Vue;\r\n    \r\n    Vue.directive('maskDecimal', decimal);\r\n    Vue.directive('maskNumber', number);\r\n    \r\n    install.installed = true;\r\n}\r\n","import {install} from './install';\r\n\r\nexport default {install};\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  \r\n  window.Vue.use({install});\r\n  \r\n}"],"names":["this","const","let","Vue"],"mappings":"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"}